<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Account Activation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body class="bg-light">
<div class="container text-center mt-5">
    <h2 class="mb-4">Clonex Tracker</h2>
    <div id="message" class="alert" role="alert">Checking activation...</div>
    <a href="index.html" class="btn btn-primary d-none" id="goToLogin">Go to Login</a>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const params = new URLSearchParams(window.location.search);
        const token = params.get('token');

        const messageEl = document.getElementById('message');

        if (!token) {
            messageEl.classList.add('alert', 'alert-danger');
            messageEl.textContent = '⚠️ Invalid or missing token in the URL.';
            return;
        }


        fetch(`/auth/activate?token=${token}`)
            .then(res => res.json())
            .then(data => {
                document.getElementById('message').classList.add('alert-success');
                document.getElementById('message').textContent = data.message;
                document.getElementById('goToLogin').classList.remove('d-none');
            })
            .catch(() => {
                document.getElementById('message').classList.add('alert-danger');
                document.getElementById('message').textContent = '⚠️ Activation failed. The link may be invalid or expired.';
            });
    });
</script>
</body>
</html>
