<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" type="image/png" href="/icons/pl.png">
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Benzos Tracker - Sign In</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" />
    <link rel="stylesheet" href="style-modern.css" />
    <style>
        /* Additional authentication-specific styles */
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }
        
        .auth-link {
            color: var(--color-primary-500);
            text-decoration: none;
            font-weight: var(--font-weight-medium);
            transition: color var(--transition-fast);
        }
        
        .auth-link:hover {
            color: var(--color-primary-600);
            text-decoration: underline;
        }
        
        .divider {
            display: flex;
            align-items: center;
            text-align: center;
            margin: var(--space-6) 0;
        }
        
        .divider::before,
        .divider::after {
            content: '';
            flex: 1;
            border-bottom: 1px solid var(--border-color);
        }
        
        .divider span {
            padding: 0 var(--space-4);
            color: var(--text-secondary);
            font-size: var(--text-sm);
        }
        
        .password-requirements {
            font-size: var(--text-xs);
            color: var(--text-secondary);
            margin-top: var(--space-2);
            line-height: 1.5;
        }
        
        .back-to-login {
            text-align: center;
            margin-top: var(--space-6);
        }
        
        .success-icon {
            width: 80px;
            height: 80px;
            background: var(--gradient-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto var(--space-6);
            font-size: 2.5rem;
        }
        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: var(--z-modal);
            padding: var(--space-6);
        }
        
        .modal-overlay.active {
            display: flex;
        }
        
        .modal-content-modern {
            background: var(--bg-elevated);
            border-radius: var(--radius-2xl);
            padding: var(--space-8);
            max-width: 500px;
            width: 100%;
            box-shadow: var(--shadow-2xl);
            border: 1px solid var(--border-color);
            animation: slideUp 0.3s ease-out;
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .hidden {
            display: none;
        }
        
        .alert-message {
            padding: var(--space-4);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-4);
            display: flex;
            align-items: center;
            gap: var(--space-3);
            animation: fadeIn 0.3s ease-out;
        }
        
        .alert-message.success {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid var(--color-success);
            color: var(--color-success);
        }
        
        .alert-message.error {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid var(--color-error);
            color: var(--color-error);
        }
        
        .alert-message.info {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid var(--color-info);
            color: var(--color-info);
        }
    </style>
</head>
<body>
    <div class="auth-container-modern">
        <div class="auth-card animate-fade-in">
            <!-- Auth Header -->
            <div class="auth-header">
                <div class="auth-logo">üíä</div>
                <h1 class="auth-title">Welcome Back</h1>
                <p class="auth-subtitle">Sign in to continue tracking your progress</p>
            </div>

            <!-- Alert Messages -->
            <div id="authMessage" class="hidden"></div>

            <!-- Login/Register Tabs -->
            <div class="tabs-modern" id="authTabs">
                <button class="tab-modern active" onclick="switchTab('login')">Sign In</button>
                <button class="tab-modern" onclick="switchTab('register')">Sign Up</button>
            </div>

            <!-- Login Form -->
            <div id="loginSection">
                <form id="loginForm">
                    <div class="form-group-modern">
                        <label for="loginEmail" class="form-label-modern">Email Address</label>
                        <input 
                            type="email" 
                            class="form-input-modern" 
                            id="loginEmail" 
                            placeholder="your.email@example.com" 
                            required 
                        />
                    </div>
                    
                    <div class="form-group-modern">
                        <label for="loginPassword" class="form-label-modern">Password</label>
                        <input 
                            type="password" 
                            class="form-input-modern" 
                            id="loginPassword" 
                            placeholder="Enter your password" 
                            required 
                        />
                    </div>

                    <button type="submit" class="btn-modern btn-primary-modern btn-full btn-lg">
                        Sign In
                    </button>

                    <div class="text-center mt-4">
                        <a href="#" class="auth-link" onclick="showForgotPassword(event)">
                            Forgot your password?
                        </a>
                    </div>
                </form>
            </div>

            <!-- Register Form -->
            <div id="registerSection" class="hidden">
                <form id="registerForm">
                    <div class="form-group-modern">
                        <label for="registerName" class="form-label-modern">Full Name</label>
                        <input 
                            type="text" 
                            class="form-input-modern" 
                            id="registerName" 
                            placeholder="John Doe" 
                            required 
                        />
                    </div>

                    <div class="form-group-modern">
                        <label for="registerEmail" class="form-label-modern">Email Address</label>
                        <input 
                            type="email" 
                            class="form-input-modern" 
                            id="registerEmail" 
                            placeholder="your.email@example.com" 
                            required 
                        />
                    </div>

                    <div class="form-group-modern">
                        <label for="registerPassword" class="form-label-modern">Password</label>
                        <input 
                            type="password" 
                            class="form-input-modern" 
                            id="registerPassword" 
                            placeholder="Create a strong password" 
                            required 
                        />
                        <div class="password-requirements">
                            Password must be at least 8 characters long and contain at least one uppercase letter, one lowercase letter, and one number.
                        </div>
                    </div>

                    <div class="form-group-modern">
                        <label for="confirmPassword" class="form-label-modern">Confirm Password</label>
                        <input 
                            type="password" 
                            class="form-input-modern" 
                            id="confirmPassword" 
                            placeholder="Confirm your password" 
                            required 
                        />
                    </div>

                    <div class="form-group-modern">
                        <label for="benzos" class="form-label-modern">Benzodiazepine Type</label>
                        <input 
                            type="text" 
                            class="form-input-modern" 
                            id="benzos" 
                            placeholder="e.g., Clonazepam, Diazepam" 
                            required 
                        />
                    </div>

                    <button type="submit" class="btn-modern btn-primary-modern btn-full btn-lg">
                        Create Account
                    </button>
                </form>
            </div>

            <!-- Forgot Password Section -->
            <div id="forgotSection" class="hidden">
                <div class="back-to-login">
                    <a href="#" class="auth-link" onclick="hideForgotPassword(event)">
                        ‚Üê Back to Sign In
                    </a>
                </div>

                <div class="text-center mb-6">
                    <div class="auth-logo">üîë</div>
                    <h2 class="auth-title" style="font-size: var(--text-2xl);">Reset Password</h2>
                    <p class="auth-subtitle">Enter your email and we'll send you a reset link</p>
                </div>

                <form id="forgotForm">
                    <div class="form-group-modern">
                        <label for="forgotEmail" class="form-label-modern">Email Address</label>
                        <input 
                            type="email" 
                            class="form-input-modern" 
                            id="forgotEmail" 
                            placeholder="your.email@example.com" 
                            required 
                        />
                    </div>

                    <button type="submit" class="btn-modern btn-primary-modern btn-full btn-lg">
                        Send Reset Link
                    </button>

                    <div class="alert-message info mt-4">
                        <span>‚ÑπÔ∏è</span>
                        <small>If your email is registered, you'll receive a reset link shortly.</small>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Registration Success Modal -->
    <div class="modal-overlay" id="successModal">
        <div class="modal-content-modern">
            <div class="success-icon">‚úÖ</div>
            <h2 class="text-center mb-4" style="font-size: var(--text-2xl); font-weight: var(--font-weight-bold); color: var(--text-primary);">
                Registration Successful!
            </h2>
            <p class="text-center mb-4" style="color: var(--text-secondary);">
                We've sent an activation code to your email. Check your inbox for instructions.
            </p>
            <div class="alert-message info mb-4">
                <span>üì¨</span>
                <small>Look for an email from <strong>Benzos Tracker</strong></small>
            </div>
            <a href="activate.html" class="btn-modern btn-primary-modern btn-full btn-lg">
                Go to Activation
            </a>
        </div>
    </div>

    <footer class="text-center" style="position: fixed; bottom: var(--space-4); left: 0; right: 0; color: white; font-size: var(--text-sm); z-index: 0;">
        ¬© 2025 LiDa Software. All rights reserved.
    </footer>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="js/login.js"></script>
    
    <script>
        // Tab switching functionality
        function switchTab(tab) {
            const loginSection = document.getElementById('loginSection');
            const registerSection = document.getElementById('registerSection');
            const forgotSection = document.getElementById('forgotSection');
            const tabs = document.querySelectorAll('.tab-modern');
            const authTitle = document.querySelector('.auth-title');
            const authSubtitle = document.querySelector('.auth-subtitle');
            
            // Hide all sections
            loginSection.classList.add('hidden');
            registerSection.classList.add('hidden');
            forgotSection.classList.add('hidden');
            
            // Remove active class from all tabs
            tabs.forEach(t => t.classList.remove('active'));
            
            // Show selected section and activate tab
            if (tab === 'login') {
                loginSection.classList.remove('hidden');
                tabs[0].classList.add('active');
                authTitle.textContent = 'Welcome Back';
                authSubtitle.textContent = 'Sign in to continue tracking your progress';
            } else if (tab === 'register') {
                registerSection.classList.remove('hidden');
                tabs[1].classList.add('active');
                authTitle.textContent = 'Get Started';
                authSubtitle.textContent = 'Create your account to start tracking your progress';
            }
            
            // Clear alert messages
            document.getElementById('authMessage').className = 'hidden';
        }
        
        // Show forgot password section
        function showForgotPassword(event) {
            if (event) event.preventDefault();
            const loginSection = document.getElementById('loginSection');
            const registerSection = document.getElementById('registerSection');
            const forgotSection = document.getElementById('forgotSection');
            const tabs = document.querySelectorAll('.tab-modern');
            
            loginSection.classList.add('hidden');
            registerSection.classList.add('hidden');
            forgotSection.classList.remove('hidden');
            
            tabs.forEach(t => t.classList.remove('active'));
            
            document.getElementById('authMessage').className = 'hidden';
        }
        
        // Hide forgot password section
        function hideForgotPassword(event) {
            if (event) event.preventDefault();
            switchTab('login');
        }
        
        // Show success modal
        function showSuccessModal() {
            document.getElementById('successModal').classList.add('active');
        }
        
        // Close modal when clicking outside
        document.getElementById('successModal').addEventListener('click', function(e) {
            if (e.target === this) {
                this.classList.remove('active');
            }
        });
        
        // Check URL hash for register
        if (window.location.hash === '#register') {
            switchTab('register');
        }
        
        // Show alert message
        function showAlert(message, type = 'info') {
            const alertEl = document.getElementById('authMessage');
            alertEl.className = `alert-message ${type}`;
            
            const icon = type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : '‚ÑπÔ∏è';
            alertEl.innerHTML = `<span>${icon}</span><span>${message}</span>`;
        }
        
        // Override the original modal trigger if needed
        const originalShowModal = window.showRegistrationSuccessModal;
        window.showRegistrationSuccessModal = function() {
            showSuccessModal();
        };
    </script>
</body>
</html>
